(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3eaf5486"],{"0417":function(t,o,s){"use strict";s("4f62")},"08d1":function(t,o,s){"use strict";s("b8be")},1083:function(t,o,s){"use strict";s("9338")},"4f62":function(t,o,s){},8714:function(t,o,s){},9338:function(t,o,s){},b8be:function(t,o,s){},e0a9:function(t,o,s){"use strict";s.r(o);var a=function(){var t=this,o=t.$createElement,s=t._self._c||o;return t.shopInfo?s("div",{staticClass:"goods"},[t._l(t.shopInfo.recommend,(function(o,a){return s("div",{key:a,staticClass:"recommend"},[s("p",{staticClass:"recommend-name"},[t._v(t._s(o.name))]),s("div",{staticClass:"recommend-wrap"},[s("ul",t._l(o.items,(function(o,a){return s("li",{key:a},[s("img",{attrs:{src:o.image_path,alt:""}}),s("div",{staticClass:"recommend-food"},[s("p",{staticClass:"recommend-food-name"},[t._v(t._s(o.name))]),s("p",{staticClass:"recommend-food-zm"},[t._v("月售"+t._s(o.month_sales)+" 好评率"+t._s(o.satisfy_rate)+"%")])]),s("div",{staticClass:"recommend-food-price"},[s("p",[t._v("￥"+t._s(o.activity.fixed_price))]),s("CartControll",{attrs:{food:o}})],1)])})),0)])])})),s("div",{staticClass:"menuview"},[s("div",{ref:"menuScroll",staticClass:"menu-wrapper"},[s("ul",t._l(t.shopInfo.menu,(function(o,a){return s("li",{key:a,on:{click:function(o){return t.selectMenu(a)}}},[o.icon_url?s("img",{attrs:{src:o.icon_url,alt:""}}):t._e(),s("span",[t._v(t._s(o.name))])])})),0)]),s("div",{ref:"foodScroll",staticClass:"foods-wrapper"},[s("ul",t._l(t.shopInfo.menu,(function(o,a){return s("li",{key:a,staticClass:"food-list-hook"},[s("div",{staticClass:"category-title"},[s("strong",[t._v(t._s(o.name))]),s("span",[t._v(t._s(o.description))])]),t._l(o.foods,(function(o,a){return s("div",{key:a,staticClass:"fooddetails",on:{click:function(s){return t.handleFood(o)}}},[s("img",{attrs:{src:o.image_path,alt:""}}),s("section",{staticClass:"fooddetails-info"},[s("h4",[t._v(t._s(o.name))]),s("p",{staticClass:"fooddetails-des"},[t._v(t._s(o.description))]),s("p",{staticClass:"fooddetails-sales"},[t._v("月售"+t._s(o.month_sales)+"份 好评率"+t._s(o.satisfy_rate)+"%")]),s("div",{staticClass:"fooddetails-price"},[s("span",{staticClass:"price"},[t._v("￥"+t._s(o.activity.fixed_price))]),s("CartControll",{attrs:{food:o}})],1)])])}))],2)})),0)])]),s("ShopCart",{attrs:{shopInfo:t.shopInfo}}),s("Food",{attrs:{food:t.selectedFood,isShow:t.showFood},on:{close:function(o){t.showFood=!1}}})],2):t._e()},n=[],e=(s("4160"),s("159b"),s("a6f4")),c=s("bc3a"),i=s.n(c),r=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{staticClass:"cartcontroll"},[t.food.count>0?s("span",{staticClass:"cartbutton button-minus",on:{click:function(o){return o.stopPropagation(),t.decreaseCount(o)}}},[s("i",{staticClass:"fa fa-minus"})]):t._e(),t.food.count>0?s("span",{staticClass:"cartcount"},[t._v(t._s(t.food.count))]):t._e(),s("span",{staticClass:"cartbutton",on:{click:function(o){return o.stopPropagation(),t.increaseCount(o)}}},[s("i",{staticClass:"fa fa-plus-circle"})])])},l=[],f={name:"CartControll",props:{food:Object},setup:function(t){var o=function(){t.food.count--},s=function(){t.food.count++};return{decreaseCount:o,increaseCount:s}}},u=f,d=(s("1083"),s("2877")),p=Object(d["a"])(u,r,l,!1,null,"04e25d6f",null),m=p.exports,v=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{staticClass:"shopcart"},[s("transition",{attrs:{name:"fade"}},[t.showCartView&&!t.isEmpty?s("div",{staticClass:"cartview-cartmask",on:{click:function(o){if(o.target!==o.currentTarget)return null;t.showCartView=!1}}},[s("div",{staticClass:"cartview-cartbody"},[s("div",{staticClass:"cartview-cartheader"},[s("span",[t._v("已选商品")]),s("button",{on:{click:t.clearFoods}},[s("i",{staticClass:"fa fa-trash-o"}),s("span",[t._v("清空")])])]),s("div",{staticClass:"entityList-cartbodyScroller"},[s("ul",{staticClass:"entityList-cartlist"},t._l(t.selectFoods,(function(o,a){return s("li",{key:a,staticClass:"entityList-entityrow"},[s("h1",[s("span",[t._v(t._s(o.name))])]),s("span",{staticClass:"entityList-entitytotal"},[t._v(t._s(o.activity.fixed_price))]),s("CartControll",{attrs:{food:o}})],1)})),0)])])]):t._e()]),s("div",{staticClass:"bottomNav-cartfooter",class:{"bottomNav-carticon-empty":t.isEmpty}},[s("span",{staticClass:"bottomNav-carticon",on:{click:function(o){t.showCartView=!t.showCartView}}},[s("i",{staticClass:"fa fa-cart-plus"}),t.totalCount?s("span",[t._v(t._s(t.totalCount))]):t._e()]),s("div",{staticClass:"bottomNav-cartInfo",on:{click:function(o){t.showCartView=!t.showCartView}}},[s("p",{staticClass:"bottomNav-carttotal"},[t.isEmpty?s("span",[t._v("未选购商品")]):s("span",[t._v("￥"+t._s(t.totalPrice.toFixed(2)))])]),s("p",{staticClass:"bottomNav-cartdelivery"},[t._v(" 另需配送费"+t._s(t.shopInfo.rst.float_delivery_fee)+"元 ")])]),s("button",{staticClass:"submit-btn"},[t.isEmpty?s("span",[t._v("￥"+t._s(t.shopInfo.rst.float_minimum_order_amount)+"元起送")]):s("span",{on:{click:t.settlement}},[t._v("去结算")])])])],1)},_=[],C={name:"ShopCart",props:{shopInfo:Object},components:{CartControll:m},setup:function(t,o){var s=o.root,a=Object(e["f"])(0),n=Object(e["f"])(0),c=Object(e["f"])([]),i=Object(e["f"])(!1),r=Object(e["a"])((function(){var o=!0;return a.value=0,n.value=0,c.value=[],t.shopInfo.recommend.forEach((function(t){t.items.forEach((function(t){t.count&&(o=!1,a.value+=t.count,n.value+=t.activity.fixed_price*t.count,c.value.push(t))}))})),t.shopInfo.menu.forEach((function(t){t.foods.forEach((function(t){t.count&&(o=!1,a.value+=t.count,n.value+=t.activity.fixed_price*t.count,c.value.push(t))}))})),o})),l=function(){t.shopInfo.recommend.forEach((function(t){t.items.forEach((function(t){t.count=0}))})),t.shopInfo.menu.forEach((function(t){t.foods.forEach((function(t){t.count=0}))}))},f=function(){s.$store.dispatch("setOrderInfo",{shopInfo:t.shopInfo.rst,selectFoods:c.value}),s.$router.push("/settlement")};return Object(e["d"])((function(){})),{isEmpty:r,totalCount:a,totalPrice:n,selectFoods:c,showCartView:i,clearFoods:l,settlement:f}}},h=C,b=(s("08d1"),Object(d["a"])(h,v,_,!1,null,"2c6f8c2f",null)),w=b.exports,y=s("f40f"),g=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("transition",{attrs:{name:"move"}},[t.isShow?s("div",{staticClass:"food"},[s("div",{staticClass:"foodpanel-close",on:{click:function(o){return t.$emit("close")}}},[s("img",{attrs:{src:"https://fuss10.elemecdn.com/8/ba/bcfa8cc62b20e044bd2ea1c1c7f3dpng.png?imageMogr/format/webp/",alt:""}})]),s("div",{staticClass:"foodpanel-body"},[s("div",{staticClass:"foodpanel-foodimg"},[s("img",{attrs:{src:t.food.image_path,alt:""}})]),s("div",{staticClass:"foodpanel-foodinfo"},[s("h4",[t._v(t._s(t.food.name))]),s("div",{staticClass:"foodpanel-foodsales"},[s("span",[t._v("月售"+t._s(t.food.month_sales))]),s("span",[t._v("好评率 "+t._s(t.food.satisfy_rate))])]),s("div",{staticClass:"foodpanel-priceLine"},[s("span",[t._v("￥"+t._s(t.food.activity.fixed_price))]),s("CartControll",{staticClass:"cart-btn",attrs:{food:t.food}})],1),s("p",[t._v(t._s(t.food.description))])])])]):t._e()])},k=[],E={name:"Food",props:{food:Object,isShow:Boolean},components:{CartControll:m},setup:function(t){return Object(e["d"])((function(){})),{}}},O=E,j=(s("eab4"),Object(d["a"])(O,g,k,!1,null,"d07fb964",null)),I=j.exports,F={name:"Goods",components:{CartControll:m,ShopCart:w,Food:I},setup:function(t,o){var s=o.refs,a=Object(e["f"])(null),n=Object(e["f"])({}),c=Object(e["f"])({}),r=Object(e["f"])(0),l=Object(e["f"])([]),f=Object(e["f"])(null),u=Object(e["f"])(!1),d=function(){i.a.get("/api/profile/batch_shop").then((function(t){t.data.recommend.forEach((function(t){t.items.forEach((function(t){t.count=0}))})),t.data.menu.forEach((function(t){t.foods.forEach((function(t){t.count=0}))})),a.value=t.data,Object(e["c"])((function(){p(),v()}))}))},p=function(){n.value=new y["a"](s.menuScroll,{click:!0}),c.value=new y["a"](s.foodScroll,{probeType:3,click:!0}),c.value.on("scroll",(function(t){r.value=Math.abs(Math.round(t.y))}))},m=function(t){var o=s.foodScroll.getElementsByClassName("food-list-hook"),a=o[t];c.value.scrollToElement(a,250)},v=function(){var t=s.foodScroll.getElementsByClassName("food-list-hook"),o=0;l.value.push(o);for(var a=0;a<t.length-1;a++){var n=t[a];o+=n.clientHeight,l.value.push(o)}},_=function(t){f.value=t,u.value=!0};return Object(e["d"])((function(){d()})),{shopInfo:a,menuScroll:n,foodScroll:c,selectMenu:m,scrollY:r,listHeight:l,handleFood:_,selectedFood:f,showFood:u}}},S=F,x=(s("0417"),Object(d["a"])(S,a,n,!1,null,"50f4da71",null));o["default"]=x.exports},eab4:function(t,o,s){"use strict";s("8714")}}]);
//# sourceMappingURL=chunk-3eaf5486.49a08a03.js.map